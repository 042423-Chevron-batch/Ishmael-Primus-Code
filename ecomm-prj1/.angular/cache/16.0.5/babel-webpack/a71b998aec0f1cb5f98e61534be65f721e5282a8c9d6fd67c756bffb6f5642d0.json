{"ast":null,"code":"\"use strict\";\n\nvar _asyncToGenerator = require(\"C:/Users/ishma/Revature/Ishmael-Primus-Code-/ecomm-prj1/node_modules/@babel/runtime/helpers/asyncToGenerator.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _token = require(\"./token\");\nvar _valueParser = _interopRequireDefault(require(\"../value-parser\"));\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\n// s2.2.7.13 (introduced in TDS 7.3.B)\nfunction nullHandler(_parser, _columnMetadata, _options, callback) {\n  callback(null);\n}\nfunction nbcRowParser(_x) {\n  return _nbcRowParser.apply(this, arguments);\n}\nfunction _nbcRowParser() {\n  _nbcRowParser = _asyncToGenerator(function* (parser) {\n    const colMetadata = parser.colMetadata;\n    const bitmapByteLength = Math.ceil(colMetadata.length / 8);\n    const columns = [];\n    const bitmap = [];\n    while (parser.buffer.length - parser.position < bitmapByteLength) {\n      yield parser.streamBuffer.waitForChunk();\n    }\n    const bytes = parser.buffer.slice(parser.position, parser.position + bitmapByteLength);\n    parser.position += bitmapByteLength;\n    for (let i = 0, len = bytes.length; i < len; i++) {\n      const byte = bytes[i];\n      bitmap.push(byte & 0b1 ? true : false);\n      bitmap.push(byte & 0b10 ? true : false);\n      bitmap.push(byte & 0b100 ? true : false);\n      bitmap.push(byte & 0b1000 ? true : false);\n      bitmap.push(byte & 0b10000 ? true : false);\n      bitmap.push(byte & 0b100000 ? true : false);\n      bitmap.push(byte & 0b1000000 ? true : false);\n      bitmap.push(byte & 0b10000000 ? true : false);\n    }\n    for (let i = 0; i < colMetadata.length; i++) {\n      const currColMetadata = colMetadata[i];\n      let value;\n      (bitmap[i] ? nullHandler : _valueParser.default)(parser, currColMetadata, parser.options, v => {\n        value = v;\n      });\n      while (parser.suspended) {\n        yield parser.streamBuffer.waitForChunk();\n        parser.suspended = false;\n        const next = parser.next;\n        next();\n      }\n      columns.push({\n        value,\n        metadata: currColMetadata\n      });\n    }\n    if (parser.options.useColumnNames) {\n      const columnsMap = {};\n      columns.forEach(column => {\n        const colName = column.metadata.colName;\n        if (columnsMap[colName] == null) {\n          columnsMap[colName] = column;\n        }\n      });\n      return new _token.NBCRowToken(columnsMap);\n    } else {\n      return new _token.NBCRowToken(columns);\n    }\n  });\n  return _nbcRowParser.apply(this, arguments);\n}\nvar _default = nbcRowParser;\nexports.default = _default;\nmodule.exports = nbcRowParser;","map":{"version":3,"names":["_asyncToGenerator","require","default","Object","defineProperty","exports","value","_token","_valueParser","_interopRequireDefault","obj","__esModule","nullHandler","_parser","_columnMetadata","_options","callback","nbcRowParser","_x","_nbcRowParser","apply","arguments","parser","colMetadata","bitmapByteLength","Math","ceil","length","columns","bitmap","buffer","position","streamBuffer","waitForChunk","bytes","slice","i","len","byte","push","currColMetadata","options","v","suspended","next","metadata","useColumnNames","columnsMap","forEach","column","colName","NBCRowToken","_default","module"],"sources":["C:/Users/ishma/Revature/Ishmael-Primus-Code-/ecomm-prj1/node_modules/tedious/lib/token/nbcrow-token-parser.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _token = require(\"./token\");\n\nvar _valueParser = _interopRequireDefault(require(\"../value-parser\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// s2.2.7.13 (introduced in TDS 7.3.B)\nfunction nullHandler(_parser, _columnMetadata, _options, callback) {\n  callback(null);\n}\n\nasync function nbcRowParser(parser) {\n  const colMetadata = parser.colMetadata;\n  const bitmapByteLength = Math.ceil(colMetadata.length / 8);\n  const columns = [];\n  const bitmap = [];\n\n  while (parser.buffer.length - parser.position < bitmapByteLength) {\n    await parser.streamBuffer.waitForChunk();\n  }\n\n  const bytes = parser.buffer.slice(parser.position, parser.position + bitmapByteLength);\n  parser.position += bitmapByteLength;\n\n  for (let i = 0, len = bytes.length; i < len; i++) {\n    const byte = bytes[i];\n    bitmap.push(byte & 0b1 ? true : false);\n    bitmap.push(byte & 0b10 ? true : false);\n    bitmap.push(byte & 0b100 ? true : false);\n    bitmap.push(byte & 0b1000 ? true : false);\n    bitmap.push(byte & 0b10000 ? true : false);\n    bitmap.push(byte & 0b100000 ? true : false);\n    bitmap.push(byte & 0b1000000 ? true : false);\n    bitmap.push(byte & 0b10000000 ? true : false);\n  }\n\n  for (let i = 0; i < colMetadata.length; i++) {\n    const currColMetadata = colMetadata[i];\n    let value;\n    (bitmap[i] ? nullHandler : _valueParser.default)(parser, currColMetadata, parser.options, v => {\n      value = v;\n    });\n\n    while (parser.suspended) {\n      await parser.streamBuffer.waitForChunk();\n      parser.suspended = false;\n      const next = parser.next;\n      next();\n    }\n\n    columns.push({\n      value,\n      metadata: currColMetadata\n    });\n  }\n\n  if (parser.options.useColumnNames) {\n    const columnsMap = {};\n    columns.forEach(column => {\n      const colName = column.metadata.colName;\n\n      if (columnsMap[colName] == null) {\n        columnsMap[colName] = column;\n      }\n    });\n    return new _token.NBCRowToken(columnsMap);\n  } else {\n    return new _token.NBCRowToken(columns);\n  }\n}\n\nvar _default = nbcRowParser;\nexports.default = _default;\nmodule.exports = nbcRowParser;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}