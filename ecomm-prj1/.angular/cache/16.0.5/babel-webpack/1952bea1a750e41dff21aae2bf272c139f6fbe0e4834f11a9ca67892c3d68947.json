{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _sprintfJs = require(\"sprintf-js\");\nvar _tdsVersions = require(\"./tds-versions\");\nconst FLAGS_1 = {\n  ENDIAN_LITTLE: 0x00,\n  ENDIAN_BIG: 0x01,\n  CHARSET_ASCII: 0x00,\n  CHARSET_EBCDIC: 0x02,\n  FLOAT_IEEE_754: 0x00,\n  FLOAT_VAX: 0x04,\n  FLOAT_ND5000: 0x08,\n  BCP_DUMPLOAD_ON: 0x00,\n  BCP_DUMPLOAD_OFF: 0x10,\n  USE_DB_ON: 0x00,\n  USE_DB_OFF: 0x20,\n  INIT_DB_WARN: 0x00,\n  INIT_DB_FATAL: 0x40,\n  SET_LANG_WARN_OFF: 0x00,\n  SET_LANG_WARN_ON: 0x80\n};\nconst FLAGS_2 = {\n  INIT_LANG_WARN: 0x00,\n  INIT_LANG_FATAL: 0x01,\n  ODBC_OFF: 0x00,\n  ODBC_ON: 0x02,\n  F_TRAN_BOUNDARY: 0x04,\n  F_CACHE_CONNECT: 0x08,\n  USER_NORMAL: 0x00,\n  USER_SERVER: 0x10,\n  USER_REMUSER: 0x20,\n  USER_SQLREPL: 0x40,\n  INTEGRATED_SECURITY_OFF: 0x00,\n  INTEGRATED_SECURITY_ON: 0x80\n};\nconst TYPE_FLAGS = {\n  SQL_DFLT: 0x00,\n  SQL_TSQL: 0x08,\n  OLEDB_OFF: 0x00,\n  OLEDB_ON: 0x10,\n  READ_WRITE_INTENT: 0x00,\n  READ_ONLY_INTENT: 0x20\n};\nconst FLAGS_3 = {\n  CHANGE_PASSWORD_NO: 0x00,\n  CHANGE_PASSWORD_YES: 0x01,\n  BINARY_XML: 0x02,\n  SPAWN_USER_INSTANCE: 0x04,\n  UNKNOWN_COLLATION_HANDLING: 0x08,\n  EXTENSION_USED: 0x10\n};\nconst FEDAUTH_OPTIONS = {\n  FEATURE_ID: 0x02,\n  LIBRARY_SECURITYTOKEN: 0x01,\n  LIBRARY_ADAL: 0x02,\n  FEDAUTH_YES_ECHO: 0x01,\n  FEDAUTH_NO_ECHO: 0x00,\n  ADAL_WORKFLOW_USER_PASS: 0x01,\n  ADAL_WORKFLOW_INTEGRATED: 0x02\n};\nconst FEATURE_EXT_TERMINATOR = 0xFF;\n\n/*\n  s2.2.6.3\n */\nclass Login7Payload {\n  constructor({\n    tdsVersion,\n    packetSize,\n    clientProgVer,\n    clientPid,\n    connectionId,\n    clientTimeZone,\n    clientLcid\n  }) {\n    this.tdsVersion = void 0;\n    this.packetSize = void 0;\n    this.clientProgVer = void 0;\n    this.clientPid = void 0;\n    this.connectionId = void 0;\n    this.clientTimeZone = void 0;\n    this.clientLcid = void 0;\n    this.readOnlyIntent = void 0;\n    this.initDbFatal = void 0;\n    this.userName = void 0;\n    this.password = void 0;\n    this.serverName = void 0;\n    this.appName = void 0;\n    this.hostname = void 0;\n    this.libraryName = void 0;\n    this.language = void 0;\n    this.database = void 0;\n    this.clientId = void 0;\n    this.sspi = void 0;\n    this.attachDbFile = void 0;\n    this.changePassword = void 0;\n    this.fedAuth = void 0;\n    this.tdsVersion = tdsVersion;\n    this.packetSize = packetSize;\n    this.clientProgVer = clientProgVer;\n    this.clientPid = clientPid;\n    this.connectionId = connectionId;\n    this.clientTimeZone = clientTimeZone;\n    this.clientLcid = clientLcid;\n    this.readOnlyIntent = false;\n    this.initDbFatal = false;\n    this.fedAuth = undefined;\n    this.userName = undefined;\n    this.password = undefined;\n    this.serverName = undefined;\n    this.appName = undefined;\n    this.hostname = undefined;\n    this.libraryName = undefined;\n    this.language = undefined;\n    this.database = undefined;\n    this.clientId = undefined;\n    this.sspi = undefined;\n    this.attachDbFile = undefined;\n    this.changePassword = undefined;\n  }\n  toBuffer() {\n    const fixedData = Buffer.alloc(94);\n    const buffers = [fixedData];\n    let offset = 0;\n    let dataOffset = fixedData.length; // Length: 4-byte\n\n    offset = fixedData.writeUInt32LE(0, offset); // TDSVersion: 4-byte\n\n    offset = fixedData.writeUInt32LE(this.tdsVersion, offset); // PacketSize: 4-byte\n\n    offset = fixedData.writeUInt32LE(this.packetSize, offset); // ClientProgVer: 4-byte\n\n    offset = fixedData.writeUInt32LE(this.clientProgVer, offset); // ClientPID: 4-byte\n\n    offset = fixedData.writeUInt32LE(this.clientPid, offset); // ConnectionID: 4-byte\n\n    offset = fixedData.writeUInt32LE(this.connectionId, offset); // OptionFlags1: 1-byte\n\n    offset = fixedData.writeUInt8(this.buildOptionFlags1(), offset); // OptionFlags2: 1-byte\n\n    offset = fixedData.writeUInt8(this.buildOptionFlags2(), offset); // TypeFlags: 1-byte\n\n    offset = fixedData.writeUInt8(this.buildTypeFlags(), offset); // OptionFlags3: 1-byte\n\n    offset = fixedData.writeUInt8(this.buildOptionFlags3(), offset); // ClientTimZone: 4-byte\n\n    offset = fixedData.writeInt32LE(this.clientTimeZone, offset); // ClientLCID: 4-byte\n\n    offset = fixedData.writeUInt32LE(this.clientLcid, offset); // ibHostName: 2-byte\n\n    offset = fixedData.writeUInt16LE(dataOffset, offset); // cchHostName: 2-byte\n\n    if (this.hostname) {\n      const buffer = Buffer.from(this.hostname, 'ucs2');\n      offset = fixedData.writeUInt16LE(buffer.length / 2, offset);\n      dataOffset += buffer.length;\n      buffers.push(buffer);\n    } else {\n      offset = fixedData.writeUInt16LE(dataOffset, offset);\n    } // ibUserName: 2-byte\n\n    offset = fixedData.writeUInt16LE(dataOffset, offset); // cchUserName: 2-byte\n\n    if (this.userName) {\n      const buffer = Buffer.from(this.userName, 'ucs2');\n      offset = fixedData.writeUInt16LE(buffer.length / 2, offset);\n      dataOffset += buffer.length;\n      buffers.push(buffer);\n    } else {\n      offset = fixedData.writeUInt16LE(0, offset);\n    } // ibPassword: 2-byte\n\n    offset = fixedData.writeUInt16LE(dataOffset, offset); // cchPassword: 2-byte\n\n    if (this.password) {\n      const buffer = Buffer.from(this.password, 'ucs2');\n      offset = fixedData.writeUInt16LE(buffer.length / 2, offset);\n      dataOffset += buffer.length;\n      buffers.push(this.scramblePassword(buffer));\n    } else {\n      offset = fixedData.writeUInt16LE(0, offset);\n    } // ibAppName: 2-byte\n\n    offset = fixedData.writeUInt16LE(dataOffset, offset); // cchAppName: 2-byte\n\n    if (this.appName) {\n      const buffer = Buffer.from(this.appName, 'ucs2');\n      offset = fixedData.writeUInt16LE(buffer.length / 2, offset);\n      dataOffset += buffer.length;\n      buffers.push(buffer);\n    } else {\n      offset = fixedData.writeUInt16LE(0, offset);\n    } // ibServerName: 2-byte\n\n    offset = fixedData.writeUInt16LE(dataOffset, offset); // cchServerName: 2-byte\n\n    if (this.serverName) {\n      const buffer = Buffer.from(this.serverName, 'ucs2');\n      offset = fixedData.writeUInt16LE(buffer.length / 2, offset);\n      dataOffset += buffer.length;\n      buffers.push(buffer);\n    } else {\n      offset = fixedData.writeUInt16LE(0, offset);\n    } // (ibUnused / ibExtension): 2-byte\n\n    offset = fixedData.writeUInt16LE(dataOffset, offset); // (cchUnused / cbExtension): 2-byte\n\n    const extensions = this.buildFeatureExt();\n    offset = fixedData.writeUInt16LE(4, offset);\n    const extensionOffset = Buffer.alloc(4);\n    extensionOffset.writeUInt32LE(dataOffset += 4, 0);\n    dataOffset += extensions.length;\n    buffers.push(extensionOffset, extensions); // ibCltIntName: 2-byte\n\n    offset = fixedData.writeUInt16LE(dataOffset, offset); // cchCltIntName: 2-byte\n\n    if (this.libraryName) {\n      const buffer = Buffer.from(this.libraryName, 'ucs2');\n      offset = fixedData.writeUInt16LE(buffer.length / 2, offset);\n      dataOffset += buffer.length;\n      buffers.push(buffer);\n    } else {\n      offset = fixedData.writeUInt16LE(0, offset);\n    } // ibLanguage: 2-byte\n\n    offset = fixedData.writeUInt16LE(dataOffset, offset); // cchLanguage: 2-byte\n\n    if (this.language) {\n      const buffer = Buffer.from(this.language, 'ucs2');\n      offset = fixedData.writeUInt16LE(buffer.length / 2, offset);\n      dataOffset += buffer.length;\n      buffers.push(buffer);\n    } else {\n      offset = fixedData.writeUInt16LE(0, offset);\n    } // ibDatabase: 2-byte\n\n    offset = fixedData.writeUInt16LE(dataOffset, offset); // cchDatabase: 2-byte\n\n    if (this.database) {\n      const buffer = Buffer.from(this.database, 'ucs2');\n      offset = fixedData.writeUInt16LE(buffer.length / 2, offset);\n      dataOffset += buffer.length;\n      buffers.push(buffer);\n    } else {\n      offset = fixedData.writeUInt16LE(0, offset);\n    } // ClientID: 6-byte\n\n    if (this.clientId) {\n      this.clientId.copy(fixedData, offset, 0, 6);\n    }\n    offset += 6; // ibSSPI: 2-byte\n\n    offset = fixedData.writeUInt16LE(dataOffset, offset); // cbSSPI: 2-byte\n\n    if (this.sspi) {\n      if (this.sspi.length > 65535) {\n        offset = fixedData.writeUInt16LE(65535, offset);\n      } else {\n        offset = fixedData.writeUInt16LE(this.sspi.length, offset);\n      }\n      buffers.push(this.sspi);\n    } else {\n      offset = fixedData.writeUInt16LE(0, offset);\n    } // ibAtchDBFile: 2-byte\n\n    offset = fixedData.writeUInt16LE(dataOffset, offset); // cchAtchDBFile: 2-byte\n\n    if (this.attachDbFile) {\n      const buffer = Buffer.from(this.attachDbFile, 'ucs2');\n      offset = fixedData.writeUInt16LE(buffer.length / 2, offset);\n      dataOffset += buffer.length;\n      buffers.push(buffer);\n    } else {\n      offset = fixedData.writeUInt16LE(0, offset);\n    } // ibChangePassword: 2-byte\n\n    offset = fixedData.writeUInt16LE(dataOffset, offset); // cchChangePassword: 2-byte\n\n    if (this.changePassword) {\n      const buffer = Buffer.from(this.changePassword, 'ucs2');\n      offset = fixedData.writeUInt16LE(buffer.length / 2, offset);\n      dataOffset += buffer.length;\n      buffers.push(buffer);\n    } else {\n      offset = fixedData.writeUInt16LE(0, offset);\n    } // cbSSPILong: 4-byte\n\n    if (this.sspi && this.sspi.length > 65535) {\n      fixedData.writeUInt32LE(this.sspi.length, offset);\n    } else {\n      fixedData.writeUInt32LE(0, offset);\n    }\n    const data = Buffer.concat(buffers);\n    data.writeUInt32LE(data.length, 0);\n    return data;\n  }\n  buildOptionFlags1() {\n    let flags1 = FLAGS_1.ENDIAN_LITTLE | FLAGS_1.CHARSET_ASCII | FLAGS_1.FLOAT_IEEE_754 | FLAGS_1.BCP_DUMPLOAD_OFF | FLAGS_1.USE_DB_OFF | FLAGS_1.SET_LANG_WARN_ON;\n    if (this.initDbFatal) {\n      flags1 |= FLAGS_1.INIT_DB_FATAL;\n    } else {\n      flags1 |= FLAGS_1.INIT_DB_WARN;\n    }\n    return flags1;\n  }\n  buildFeatureExt() {\n    const buffers = [];\n    const fedAuth = this.fedAuth;\n    if (fedAuth) {\n      switch (fedAuth.type) {\n        case 'ADAL':\n          const buffer = Buffer.alloc(7);\n          buffer.writeUInt8(FEDAUTH_OPTIONS.FEATURE_ID, 0);\n          buffer.writeUInt32LE(2, 1);\n          buffer.writeUInt8(FEDAUTH_OPTIONS.LIBRARY_ADAL << 1 | (fedAuth.echo ? FEDAUTH_OPTIONS.FEDAUTH_YES_ECHO : FEDAUTH_OPTIONS.FEDAUTH_NO_ECHO), 5);\n          buffer.writeUInt8(fedAuth.workflow === 'integrated' ? 0x02 : FEDAUTH_OPTIONS.ADAL_WORKFLOW_USER_PASS, 6);\n          buffers.push(buffer);\n          break;\n        case 'SECURITYTOKEN':\n          const token = Buffer.from(fedAuth.fedAuthToken, 'ucs2');\n          const buf = Buffer.alloc(10);\n          let offset = 0;\n          offset = buf.writeUInt8(FEDAUTH_OPTIONS.FEATURE_ID, offset);\n          offset = buf.writeUInt32LE(token.length + 4 + 1, offset);\n          offset = buf.writeUInt8(FEDAUTH_OPTIONS.LIBRARY_SECURITYTOKEN << 1 | (fedAuth.echo ? FEDAUTH_OPTIONS.FEDAUTH_YES_ECHO : FEDAUTH_OPTIONS.FEDAUTH_NO_ECHO), offset);\n          buf.writeInt32LE(token.length, offset);\n          buffers.push(buf);\n          buffers.push(token);\n          break;\n      }\n    }\n    if (this.tdsVersion >= _tdsVersions.versions['7_4']) {\n      // Signal UTF-8 support: Value 0x0A, bit 0 must be set to 1. Added in TDS 7.4.\n      const UTF8_SUPPORT_FEATURE_ID = 0x0a;\n      const UTF8_SUPPORT_CLIENT_SUPPORTS_UTF8 = 0x01;\n      const buf = Buffer.alloc(6);\n      buf.writeUInt8(UTF8_SUPPORT_FEATURE_ID, 0);\n      buf.writeUInt32LE(1, 1);\n      buf.writeUInt8(UTF8_SUPPORT_CLIENT_SUPPORTS_UTF8, 5);\n      buffers.push(buf);\n    }\n    buffers.push(Buffer.from([FEATURE_EXT_TERMINATOR]));\n    return Buffer.concat(buffers);\n  }\n  buildOptionFlags2() {\n    let flags2 = FLAGS_2.INIT_LANG_WARN | FLAGS_2.ODBC_OFF | FLAGS_2.USER_NORMAL;\n    if (this.sspi) {\n      flags2 |= FLAGS_2.INTEGRATED_SECURITY_ON;\n    } else {\n      flags2 |= FLAGS_2.INTEGRATED_SECURITY_OFF;\n    }\n    return flags2;\n  }\n  buildTypeFlags() {\n    let typeFlags = TYPE_FLAGS.SQL_DFLT | TYPE_FLAGS.OLEDB_OFF;\n    if (this.readOnlyIntent) {\n      typeFlags |= TYPE_FLAGS.READ_ONLY_INTENT;\n    } else {\n      typeFlags |= TYPE_FLAGS.READ_WRITE_INTENT;\n    }\n    return typeFlags;\n  }\n  buildOptionFlags3() {\n    return FLAGS_3.CHANGE_PASSWORD_NO | FLAGS_3.UNKNOWN_COLLATION_HANDLING | FLAGS_3.EXTENSION_USED;\n  }\n  scramblePassword(password) {\n    for (let b = 0, len = password.length; b < len; b++) {\n      let byte = password[b];\n      const lowNibble = byte & 0x0f;\n      const highNibble = byte >> 4;\n      byte = lowNibble << 4 | highNibble;\n      byte = byte ^ 0xa5;\n      password[b] = byte;\n    }\n    return password;\n  }\n  toString(indent = '') {\n    return indent + 'Login7 - ' + (0, _sprintfJs.sprintf)('TDS:0x%08X, PacketSize:0x%08X, ClientProgVer:0x%08X, ClientPID:0x%08X, ConnectionID:0x%08X', this.tdsVersion, this.packetSize, this.clientProgVer, this.clientPid, this.connectionId) + '\\n' + indent + '         ' + (0, _sprintfJs.sprintf)('Flags1:0x%02X, Flags2:0x%02X, TypeFlags:0x%02X, Flags3:0x%02X, ClientTimezone:%d, ClientLCID:0x%08X', this.buildOptionFlags1(), this.buildOptionFlags2(), this.buildTypeFlags(), this.buildOptionFlags3(), this.clientTimeZone, this.clientLcid) + '\\n' + indent + '         ' + (0, _sprintfJs.sprintf)(\"Hostname:'%s', Username:'%s', Password:'%s', AppName:'%s', ServerName:'%s', LibraryName:'%s'\", this.hostname, this.userName, this.password, this.appName, this.serverName, this.libraryName) + '\\n' + indent + '         ' + (0, _sprintfJs.sprintf)(\"Language:'%s', Database:'%s', SSPI:'%s', AttachDbFile:'%s', ChangePassword:'%s'\", this.language, this.database, this.sspi, this.attachDbFile, this.changePassword);\n  }\n}\nvar _default = Login7Payload;\nexports.default = _default;\nmodule.exports = Login7Payload;","map":{"version":3,"names":["Object","defineProperty","exports","value","default","_sprintfJs","require","_tdsVersions","FLAGS_1","ENDIAN_LITTLE","ENDIAN_BIG","CHARSET_ASCII","CHARSET_EBCDIC","FLOAT_IEEE_754","FLOAT_VAX","FLOAT_ND5000","BCP_DUMPLOAD_ON","BCP_DUMPLOAD_OFF","USE_DB_ON","USE_DB_OFF","INIT_DB_WARN","INIT_DB_FATAL","SET_LANG_WARN_OFF","SET_LANG_WARN_ON","FLAGS_2","INIT_LANG_WARN","INIT_LANG_FATAL","ODBC_OFF","ODBC_ON","F_TRAN_BOUNDARY","F_CACHE_CONNECT","USER_NORMAL","USER_SERVER","USER_REMUSER","USER_SQLREPL","INTEGRATED_SECURITY_OFF","INTEGRATED_SECURITY_ON","TYPE_FLAGS","SQL_DFLT","SQL_TSQL","OLEDB_OFF","OLEDB_ON","READ_WRITE_INTENT","READ_ONLY_INTENT","FLAGS_3","CHANGE_PASSWORD_NO","CHANGE_PASSWORD_YES","BINARY_XML","SPAWN_USER_INSTANCE","UNKNOWN_COLLATION_HANDLING","EXTENSION_USED","FEDAUTH_OPTIONS","FEATURE_ID","LIBRARY_SECURITYTOKEN","LIBRARY_ADAL","FEDAUTH_YES_ECHO","FEDAUTH_NO_ECHO","ADAL_WORKFLOW_USER_PASS","ADAL_WORKFLOW_INTEGRATED","FEATURE_EXT_TERMINATOR","Login7Payload","constructor","tdsVersion","packetSize","clientProgVer","clientPid","connectionId","clientTimeZone","clientLcid","readOnlyIntent","initDbFatal","userName","password","serverName","appName","hostname","libraryName","language","database","clientId","sspi","attachDbFile","changePassword","fedAuth","undefined","toBuffer","fixedData","Buffer","alloc","buffers","offset","dataOffset","length","writeUInt32LE","writeUInt8","buildOptionFlags1","buildOptionFlags2","buildTypeFlags","buildOptionFlags3","writeInt32LE","writeUInt16LE","buffer","from","push","scramblePassword","extensions","buildFeatureExt","extensionOffset","copy","data","concat","flags1","type","echo","workflow","token","fedAuthToken","buf","versions","UTF8_SUPPORT_FEATURE_ID","UTF8_SUPPORT_CLIENT_SUPPORTS_UTF8","flags2","typeFlags","b","len","byte","lowNibble","highNibble","toString","indent","sprintf","_default","module"],"sources":["C:/Users/ishma/Revature/Ishmael-Primus-Code-/ecomm-prj1/node_modules/tedious/lib/login7-payload.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _sprintfJs = require(\"sprintf-js\");\n\nvar _tdsVersions = require(\"./tds-versions\");\n\nconst FLAGS_1 = {\n  ENDIAN_LITTLE: 0x00,\n  ENDIAN_BIG: 0x01,\n  CHARSET_ASCII: 0x00,\n  CHARSET_EBCDIC: 0x02,\n  FLOAT_IEEE_754: 0x00,\n  FLOAT_VAX: 0x04,\n  FLOAT_ND5000: 0x08,\n  BCP_DUMPLOAD_ON: 0x00,\n  BCP_DUMPLOAD_OFF: 0x10,\n  USE_DB_ON: 0x00,\n  USE_DB_OFF: 0x20,\n  INIT_DB_WARN: 0x00,\n  INIT_DB_FATAL: 0x40,\n  SET_LANG_WARN_OFF: 0x00,\n  SET_LANG_WARN_ON: 0x80\n};\nconst FLAGS_2 = {\n  INIT_LANG_WARN: 0x00,\n  INIT_LANG_FATAL: 0x01,\n  ODBC_OFF: 0x00,\n  ODBC_ON: 0x02,\n  F_TRAN_BOUNDARY: 0x04,\n  F_CACHE_CONNECT: 0x08,\n  USER_NORMAL: 0x00,\n  USER_SERVER: 0x10,\n  USER_REMUSER: 0x20,\n  USER_SQLREPL: 0x40,\n  INTEGRATED_SECURITY_OFF: 0x00,\n  INTEGRATED_SECURITY_ON: 0x80\n};\nconst TYPE_FLAGS = {\n  SQL_DFLT: 0x00,\n  SQL_TSQL: 0x08,\n  OLEDB_OFF: 0x00,\n  OLEDB_ON: 0x10,\n  READ_WRITE_INTENT: 0x00,\n  READ_ONLY_INTENT: 0x20\n};\nconst FLAGS_3 = {\n  CHANGE_PASSWORD_NO: 0x00,\n  CHANGE_PASSWORD_YES: 0x01,\n  BINARY_XML: 0x02,\n  SPAWN_USER_INSTANCE: 0x04,\n  UNKNOWN_COLLATION_HANDLING: 0x08,\n  EXTENSION_USED: 0x10\n};\nconst FEDAUTH_OPTIONS = {\n  FEATURE_ID: 0x02,\n  LIBRARY_SECURITYTOKEN: 0x01,\n  LIBRARY_ADAL: 0x02,\n  FEDAUTH_YES_ECHO: 0x01,\n  FEDAUTH_NO_ECHO: 0x00,\n  ADAL_WORKFLOW_USER_PASS: 0x01,\n  ADAL_WORKFLOW_INTEGRATED: 0x02\n};\nconst FEATURE_EXT_TERMINATOR = 0xFF;\n\n/*\n  s2.2.6.3\n */\nclass Login7Payload {\n  constructor({\n    tdsVersion,\n    packetSize,\n    clientProgVer,\n    clientPid,\n    connectionId,\n    clientTimeZone,\n    clientLcid\n  }) {\n    this.tdsVersion = void 0;\n    this.packetSize = void 0;\n    this.clientProgVer = void 0;\n    this.clientPid = void 0;\n    this.connectionId = void 0;\n    this.clientTimeZone = void 0;\n    this.clientLcid = void 0;\n    this.readOnlyIntent = void 0;\n    this.initDbFatal = void 0;\n    this.userName = void 0;\n    this.password = void 0;\n    this.serverName = void 0;\n    this.appName = void 0;\n    this.hostname = void 0;\n    this.libraryName = void 0;\n    this.language = void 0;\n    this.database = void 0;\n    this.clientId = void 0;\n    this.sspi = void 0;\n    this.attachDbFile = void 0;\n    this.changePassword = void 0;\n    this.fedAuth = void 0;\n    this.tdsVersion = tdsVersion;\n    this.packetSize = packetSize;\n    this.clientProgVer = clientProgVer;\n    this.clientPid = clientPid;\n    this.connectionId = connectionId;\n    this.clientTimeZone = clientTimeZone;\n    this.clientLcid = clientLcid;\n    this.readOnlyIntent = false;\n    this.initDbFatal = false;\n    this.fedAuth = undefined;\n    this.userName = undefined;\n    this.password = undefined;\n    this.serverName = undefined;\n    this.appName = undefined;\n    this.hostname = undefined;\n    this.libraryName = undefined;\n    this.language = undefined;\n    this.database = undefined;\n    this.clientId = undefined;\n    this.sspi = undefined;\n    this.attachDbFile = undefined;\n    this.changePassword = undefined;\n  }\n\n  toBuffer() {\n    const fixedData = Buffer.alloc(94);\n    const buffers = [fixedData];\n    let offset = 0;\n    let dataOffset = fixedData.length; // Length: 4-byte\n\n    offset = fixedData.writeUInt32LE(0, offset); // TDSVersion: 4-byte\n\n    offset = fixedData.writeUInt32LE(this.tdsVersion, offset); // PacketSize: 4-byte\n\n    offset = fixedData.writeUInt32LE(this.packetSize, offset); // ClientProgVer: 4-byte\n\n    offset = fixedData.writeUInt32LE(this.clientProgVer, offset); // ClientPID: 4-byte\n\n    offset = fixedData.writeUInt32LE(this.clientPid, offset); // ConnectionID: 4-byte\n\n    offset = fixedData.writeUInt32LE(this.connectionId, offset); // OptionFlags1: 1-byte\n\n    offset = fixedData.writeUInt8(this.buildOptionFlags1(), offset); // OptionFlags2: 1-byte\n\n    offset = fixedData.writeUInt8(this.buildOptionFlags2(), offset); // TypeFlags: 1-byte\n\n    offset = fixedData.writeUInt8(this.buildTypeFlags(), offset); // OptionFlags3: 1-byte\n\n    offset = fixedData.writeUInt8(this.buildOptionFlags3(), offset); // ClientTimZone: 4-byte\n\n    offset = fixedData.writeInt32LE(this.clientTimeZone, offset); // ClientLCID: 4-byte\n\n    offset = fixedData.writeUInt32LE(this.clientLcid, offset); // ibHostName: 2-byte\n\n    offset = fixedData.writeUInt16LE(dataOffset, offset); // cchHostName: 2-byte\n\n    if (this.hostname) {\n      const buffer = Buffer.from(this.hostname, 'ucs2');\n      offset = fixedData.writeUInt16LE(buffer.length / 2, offset);\n      dataOffset += buffer.length;\n      buffers.push(buffer);\n    } else {\n      offset = fixedData.writeUInt16LE(dataOffset, offset);\n    } // ibUserName: 2-byte\n\n\n    offset = fixedData.writeUInt16LE(dataOffset, offset); // cchUserName: 2-byte\n\n    if (this.userName) {\n      const buffer = Buffer.from(this.userName, 'ucs2');\n      offset = fixedData.writeUInt16LE(buffer.length / 2, offset);\n      dataOffset += buffer.length;\n      buffers.push(buffer);\n    } else {\n      offset = fixedData.writeUInt16LE(0, offset);\n    } // ibPassword: 2-byte\n\n\n    offset = fixedData.writeUInt16LE(dataOffset, offset); // cchPassword: 2-byte\n\n    if (this.password) {\n      const buffer = Buffer.from(this.password, 'ucs2');\n      offset = fixedData.writeUInt16LE(buffer.length / 2, offset);\n      dataOffset += buffer.length;\n      buffers.push(this.scramblePassword(buffer));\n    } else {\n      offset = fixedData.writeUInt16LE(0, offset);\n    } // ibAppName: 2-byte\n\n\n    offset = fixedData.writeUInt16LE(dataOffset, offset); // cchAppName: 2-byte\n\n    if (this.appName) {\n      const buffer = Buffer.from(this.appName, 'ucs2');\n      offset = fixedData.writeUInt16LE(buffer.length / 2, offset);\n      dataOffset += buffer.length;\n      buffers.push(buffer);\n    } else {\n      offset = fixedData.writeUInt16LE(0, offset);\n    } // ibServerName: 2-byte\n\n\n    offset = fixedData.writeUInt16LE(dataOffset, offset); // cchServerName: 2-byte\n\n    if (this.serverName) {\n      const buffer = Buffer.from(this.serverName, 'ucs2');\n      offset = fixedData.writeUInt16LE(buffer.length / 2, offset);\n      dataOffset += buffer.length;\n      buffers.push(buffer);\n    } else {\n      offset = fixedData.writeUInt16LE(0, offset);\n    } // (ibUnused / ibExtension): 2-byte\n\n\n    offset = fixedData.writeUInt16LE(dataOffset, offset); // (cchUnused / cbExtension): 2-byte\n\n    const extensions = this.buildFeatureExt();\n    offset = fixedData.writeUInt16LE(4, offset);\n    const extensionOffset = Buffer.alloc(4);\n    extensionOffset.writeUInt32LE(dataOffset += 4, 0);\n    dataOffset += extensions.length;\n    buffers.push(extensionOffset, extensions); // ibCltIntName: 2-byte\n\n    offset = fixedData.writeUInt16LE(dataOffset, offset); // cchCltIntName: 2-byte\n\n    if (this.libraryName) {\n      const buffer = Buffer.from(this.libraryName, 'ucs2');\n      offset = fixedData.writeUInt16LE(buffer.length / 2, offset);\n      dataOffset += buffer.length;\n      buffers.push(buffer);\n    } else {\n      offset = fixedData.writeUInt16LE(0, offset);\n    } // ibLanguage: 2-byte\n\n\n    offset = fixedData.writeUInt16LE(dataOffset, offset); // cchLanguage: 2-byte\n\n    if (this.language) {\n      const buffer = Buffer.from(this.language, 'ucs2');\n      offset = fixedData.writeUInt16LE(buffer.length / 2, offset);\n      dataOffset += buffer.length;\n      buffers.push(buffer);\n    } else {\n      offset = fixedData.writeUInt16LE(0, offset);\n    } // ibDatabase: 2-byte\n\n\n    offset = fixedData.writeUInt16LE(dataOffset, offset); // cchDatabase: 2-byte\n\n    if (this.database) {\n      const buffer = Buffer.from(this.database, 'ucs2');\n      offset = fixedData.writeUInt16LE(buffer.length / 2, offset);\n      dataOffset += buffer.length;\n      buffers.push(buffer);\n    } else {\n      offset = fixedData.writeUInt16LE(0, offset);\n    } // ClientID: 6-byte\n\n\n    if (this.clientId) {\n      this.clientId.copy(fixedData, offset, 0, 6);\n    }\n\n    offset += 6; // ibSSPI: 2-byte\n\n    offset = fixedData.writeUInt16LE(dataOffset, offset); // cbSSPI: 2-byte\n\n    if (this.sspi) {\n      if (this.sspi.length > 65535) {\n        offset = fixedData.writeUInt16LE(65535, offset);\n      } else {\n        offset = fixedData.writeUInt16LE(this.sspi.length, offset);\n      }\n\n      buffers.push(this.sspi);\n    } else {\n      offset = fixedData.writeUInt16LE(0, offset);\n    } // ibAtchDBFile: 2-byte\n\n\n    offset = fixedData.writeUInt16LE(dataOffset, offset); // cchAtchDBFile: 2-byte\n\n    if (this.attachDbFile) {\n      const buffer = Buffer.from(this.attachDbFile, 'ucs2');\n      offset = fixedData.writeUInt16LE(buffer.length / 2, offset);\n      dataOffset += buffer.length;\n      buffers.push(buffer);\n    } else {\n      offset = fixedData.writeUInt16LE(0, offset);\n    } // ibChangePassword: 2-byte\n\n\n    offset = fixedData.writeUInt16LE(dataOffset, offset); // cchChangePassword: 2-byte\n\n    if (this.changePassword) {\n      const buffer = Buffer.from(this.changePassword, 'ucs2');\n      offset = fixedData.writeUInt16LE(buffer.length / 2, offset);\n      dataOffset += buffer.length;\n      buffers.push(buffer);\n    } else {\n      offset = fixedData.writeUInt16LE(0, offset);\n    } // cbSSPILong: 4-byte\n\n\n    if (this.sspi && this.sspi.length > 65535) {\n      fixedData.writeUInt32LE(this.sspi.length, offset);\n    } else {\n      fixedData.writeUInt32LE(0, offset);\n    }\n\n    const data = Buffer.concat(buffers);\n    data.writeUInt32LE(data.length, 0);\n    return data;\n  }\n\n  buildOptionFlags1() {\n    let flags1 = FLAGS_1.ENDIAN_LITTLE | FLAGS_1.CHARSET_ASCII | FLAGS_1.FLOAT_IEEE_754 | FLAGS_1.BCP_DUMPLOAD_OFF | FLAGS_1.USE_DB_OFF | FLAGS_1.SET_LANG_WARN_ON;\n\n    if (this.initDbFatal) {\n      flags1 |= FLAGS_1.INIT_DB_FATAL;\n    } else {\n      flags1 |= FLAGS_1.INIT_DB_WARN;\n    }\n\n    return flags1;\n  }\n\n  buildFeatureExt() {\n    const buffers = [];\n    const fedAuth = this.fedAuth;\n\n    if (fedAuth) {\n      switch (fedAuth.type) {\n        case 'ADAL':\n          const buffer = Buffer.alloc(7);\n          buffer.writeUInt8(FEDAUTH_OPTIONS.FEATURE_ID, 0);\n          buffer.writeUInt32LE(2, 1);\n          buffer.writeUInt8(FEDAUTH_OPTIONS.LIBRARY_ADAL << 1 | (fedAuth.echo ? FEDAUTH_OPTIONS.FEDAUTH_YES_ECHO : FEDAUTH_OPTIONS.FEDAUTH_NO_ECHO), 5);\n          buffer.writeUInt8(fedAuth.workflow === 'integrated' ? 0x02 : FEDAUTH_OPTIONS.ADAL_WORKFLOW_USER_PASS, 6);\n          buffers.push(buffer);\n          break;\n\n        case 'SECURITYTOKEN':\n          const token = Buffer.from(fedAuth.fedAuthToken, 'ucs2');\n          const buf = Buffer.alloc(10);\n          let offset = 0;\n          offset = buf.writeUInt8(FEDAUTH_OPTIONS.FEATURE_ID, offset);\n          offset = buf.writeUInt32LE(token.length + 4 + 1, offset);\n          offset = buf.writeUInt8(FEDAUTH_OPTIONS.LIBRARY_SECURITYTOKEN << 1 | (fedAuth.echo ? FEDAUTH_OPTIONS.FEDAUTH_YES_ECHO : FEDAUTH_OPTIONS.FEDAUTH_NO_ECHO), offset);\n          buf.writeInt32LE(token.length, offset);\n          buffers.push(buf);\n          buffers.push(token);\n          break;\n      }\n    }\n\n    if (this.tdsVersion >= _tdsVersions.versions['7_4']) {\n      // Signal UTF-8 support: Value 0x0A, bit 0 must be set to 1. Added in TDS 7.4.\n      const UTF8_SUPPORT_FEATURE_ID = 0x0a;\n      const UTF8_SUPPORT_CLIENT_SUPPORTS_UTF8 = 0x01;\n      const buf = Buffer.alloc(6);\n      buf.writeUInt8(UTF8_SUPPORT_FEATURE_ID, 0);\n      buf.writeUInt32LE(1, 1);\n      buf.writeUInt8(UTF8_SUPPORT_CLIENT_SUPPORTS_UTF8, 5);\n      buffers.push(buf);\n    }\n\n    buffers.push(Buffer.from([FEATURE_EXT_TERMINATOR]));\n    return Buffer.concat(buffers);\n  }\n\n  buildOptionFlags2() {\n    let flags2 = FLAGS_2.INIT_LANG_WARN | FLAGS_2.ODBC_OFF | FLAGS_2.USER_NORMAL;\n\n    if (this.sspi) {\n      flags2 |= FLAGS_2.INTEGRATED_SECURITY_ON;\n    } else {\n      flags2 |= FLAGS_2.INTEGRATED_SECURITY_OFF;\n    }\n\n    return flags2;\n  }\n\n  buildTypeFlags() {\n    let typeFlags = TYPE_FLAGS.SQL_DFLT | TYPE_FLAGS.OLEDB_OFF;\n\n    if (this.readOnlyIntent) {\n      typeFlags |= TYPE_FLAGS.READ_ONLY_INTENT;\n    } else {\n      typeFlags |= TYPE_FLAGS.READ_WRITE_INTENT;\n    }\n\n    return typeFlags;\n  }\n\n  buildOptionFlags3() {\n    return FLAGS_3.CHANGE_PASSWORD_NO | FLAGS_3.UNKNOWN_COLLATION_HANDLING | FLAGS_3.EXTENSION_USED;\n  }\n\n  scramblePassword(password) {\n    for (let b = 0, len = password.length; b < len; b++) {\n      let byte = password[b];\n      const lowNibble = byte & 0x0f;\n      const highNibble = byte >> 4;\n      byte = lowNibble << 4 | highNibble;\n      byte = byte ^ 0xa5;\n      password[b] = byte;\n    }\n\n    return password;\n  }\n\n  toString(indent = '') {\n    return indent + 'Login7 - ' + (0, _sprintfJs.sprintf)('TDS:0x%08X, PacketSize:0x%08X, ClientProgVer:0x%08X, ClientPID:0x%08X, ConnectionID:0x%08X', this.tdsVersion, this.packetSize, this.clientProgVer, this.clientPid, this.connectionId) + '\\n' + indent + '         ' + (0, _sprintfJs.sprintf)('Flags1:0x%02X, Flags2:0x%02X, TypeFlags:0x%02X, Flags3:0x%02X, ClientTimezone:%d, ClientLCID:0x%08X', this.buildOptionFlags1(), this.buildOptionFlags2(), this.buildTypeFlags(), this.buildOptionFlags3(), this.clientTimeZone, this.clientLcid) + '\\n' + indent + '         ' + (0, _sprintfJs.sprintf)(\"Hostname:'%s', Username:'%s', Password:'%s', AppName:'%s', ServerName:'%s', LibraryName:'%s'\", this.hostname, this.userName, this.password, this.appName, this.serverName, this.libraryName) + '\\n' + indent + '         ' + (0, _sprintfJs.sprintf)(\"Language:'%s', Database:'%s', SSPI:'%s', AttachDbFile:'%s', ChangePassword:'%s'\", this.language, this.database, this.sspi, this.attachDbFile, this.changePassword);\n  }\n\n}\n\nvar _default = Login7Payload;\nexports.default = _default;\nmodule.exports = Login7Payload;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}