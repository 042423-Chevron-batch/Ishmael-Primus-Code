{"ast":null,"code":"/*! @azure/msal-browser v2.37.1 2023-06-07 */\n'use strict';\n\nimport { __extends, __awaiter, __generator, __assign } from '../_virtual/_tslib.js';\nimport { StandardInteractionClient } from './StandardInteractionClient.js';\nimport { PerformanceEvents, AuthError, RefreshTokenClient } from '@azure/msal-common';\nimport { ApiId } from '../utils/BrowserConstants.js';\nimport { BrowserAuthError } from '../error/BrowserAuthError.js';\n\n/*\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License.\r\n */\nvar SilentRefreshClient = /** @class */function (_super) {\n  __extends(SilentRefreshClient, _super);\n  function SilentRefreshClient() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  /**\r\n   * Exchanges the refresh token for new tokens\r\n   * @param request\r\n   */\n  SilentRefreshClient.prototype.acquireToken = function (request) {\n    return __awaiter(this, void 0, void 0, function () {\n      var silentRequest, _a, acquireTokenMeasurement, serverTelemetryManager, refreshTokenClient;\n      var _this = this;\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            this.performanceClient.addQueueMeasurement(PerformanceEvents.SilentRefreshClientAcquireToken, request.correlationId);\n            this.performanceClient.setPreQueueTime(PerformanceEvents.InitializeBaseRequest, request.correlationId);\n            _a = [__assign({}, request)];\n            return [4 /*yield*/, this.initializeBaseRequest(request, request.account)];\n          case 1:\n            silentRequest = __assign.apply(void 0, _a.concat([_b.sent()]));\n            acquireTokenMeasurement = this.performanceClient.startMeasurement(PerformanceEvents.SilentRefreshClientAcquireToken, silentRequest.correlationId);\n            serverTelemetryManager = this.initializeServerTelemetryManager(ApiId.acquireTokenSilent_silentFlow);\n            return [4 /*yield*/, this.createRefreshTokenClient(serverTelemetryManager, silentRequest.authority, silentRequest.azureCloudOptions)];\n          case 2:\n            refreshTokenClient = _b.sent();\n            this.logger.verbose(\"Refresh token client created\");\n            // Send request to renew token. Auth module will throw errors if token cannot be renewed.\n            this.performanceClient.setPreQueueTime(PerformanceEvents.RefreshTokenClientAcquireTokenByRefreshToken, request.correlationId);\n            return [2 /*return*/, refreshTokenClient.acquireTokenByRefreshToken(silentRequest).then(function (result) {\n              acquireTokenMeasurement.endMeasurement({\n                success: true,\n                fromCache: result.fromCache,\n                requestId: result.requestId\n              });\n              return result;\n            }).catch(function (e) {\n              if (e instanceof AuthError) {\n                e.setCorrelationId(_this.correlationId);\n              }\n              serverTelemetryManager.cacheFailedRequest(e);\n              acquireTokenMeasurement.endMeasurement({\n                errorCode: e.errorCode,\n                subErrorCode: e.subError,\n                success: false\n              });\n              throw e;\n            })];\n        }\n      });\n    });\n  };\n  /**\r\n   * Currently Unsupported\r\n   */\n  SilentRefreshClient.prototype.logout = function () {\n    // Synchronous so we must reject\n    return Promise.reject(BrowserAuthError.createSilentLogoutUnsupportedError());\n  };\n  /**\r\n   * Creates a Refresh Client with the given authority, or the default authority.\r\n   * @param serverTelemetryManager\r\n   * @param authorityUrl\r\n   */\n  SilentRefreshClient.prototype.createRefreshTokenClient = function (serverTelemetryManager, authorityUrl, azureCloudOptions) {\n    return __awaiter(this, void 0, void 0, function () {\n      var clientConfig;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            // Create auth module.\n            this.performanceClient.setPreQueueTime(PerformanceEvents.StandardInteractionClientGetClientConfiguration, this.correlationId);\n            return [4 /*yield*/, this.getClientConfiguration(serverTelemetryManager, authorityUrl, azureCloudOptions)];\n          case 1:\n            clientConfig = _a.sent();\n            return [2 /*return*/, new RefreshTokenClient(clientConfig, this.performanceClient)];\n        }\n      });\n    });\n  };\n  return SilentRefreshClient;\n}(StandardInteractionClient);\nexport { SilentRefreshClient };","map":{"version":3,"names":["__extends","__awaiter","__generator","__assign","StandardInteractionClient","PerformanceEvents","AuthError","RefreshTokenClient","ApiId","BrowserAuthError","SilentRefreshClient","_super","apply","arguments","prototype","acquireToken","request","silentRequest","_a","acquireTokenMeasurement","serverTelemetryManager","refreshTokenClient","_this","_b","label","performanceClient","addQueueMeasurement","SilentRefreshClientAcquireToken","correlationId","setPreQueueTime","InitializeBaseRequest","initializeBaseRequest","account","concat","sent","startMeasurement","initializeServerTelemetryManager","acquireTokenSilent_silentFlow","createRefreshTokenClient","authority","azureCloudOptions","logger","verbose","RefreshTokenClientAcquireTokenByRefreshToken","acquireTokenByRefreshToken","then","result","endMeasurement","success","fromCache","requestId","catch","e","setCorrelationId","cacheFailedRequest","errorCode","subErrorCode","subError","logout","Promise","reject","createSilentLogoutUnsupportedError","authorityUrl","clientConfig","StandardInteractionClientGetClientConfiguration","getClientConfiguration"],"sources":["C:/Users/ishma/Revature/Ishmael-Primus-Code-/ecomm-prj1/node_modules/@azure/msal-browser/dist/interaction_client/SilentRefreshClient.js"],"sourcesContent":["/*! @azure/msal-browser v2.37.1 2023-06-07 */\n'use strict';\nimport { __extends, __awaiter, __generator, __assign } from '../_virtual/_tslib.js';\nimport { StandardInteractionClient } from './StandardInteractionClient.js';\nimport { PerformanceEvents, AuthError, RefreshTokenClient } from '@azure/msal-common';\nimport { ApiId } from '../utils/BrowserConstants.js';\nimport { BrowserAuthError } from '../error/BrowserAuthError.js';\n\n/*\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License.\r\n */\r\nvar SilentRefreshClient = /** @class */ (function (_super) {\r\n    __extends(SilentRefreshClient, _super);\r\n    function SilentRefreshClient() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    /**\r\n     * Exchanges the refresh token for new tokens\r\n     * @param request\r\n     */\r\n    SilentRefreshClient.prototype.acquireToken = function (request) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var silentRequest, _a, acquireTokenMeasurement, serverTelemetryManager, refreshTokenClient;\r\n            var _this = this;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        this.performanceClient.addQueueMeasurement(PerformanceEvents.SilentRefreshClientAcquireToken, request.correlationId);\r\n                        this.performanceClient.setPreQueueTime(PerformanceEvents.InitializeBaseRequest, request.correlationId);\r\n                        _a = [__assign({}, request)];\r\n                        return [4 /*yield*/, this.initializeBaseRequest(request, request.account)];\r\n                    case 1:\r\n                        silentRequest = __assign.apply(void 0, _a.concat([_b.sent()]));\r\n                        acquireTokenMeasurement = this.performanceClient.startMeasurement(PerformanceEvents.SilentRefreshClientAcquireToken, silentRequest.correlationId);\r\n                        serverTelemetryManager = this.initializeServerTelemetryManager(ApiId.acquireTokenSilent_silentFlow);\r\n                        return [4 /*yield*/, this.createRefreshTokenClient(serverTelemetryManager, silentRequest.authority, silentRequest.azureCloudOptions)];\r\n                    case 2:\r\n                        refreshTokenClient = _b.sent();\r\n                        this.logger.verbose(\"Refresh token client created\");\r\n                        // Send request to renew token. Auth module will throw errors if token cannot be renewed.\r\n                        this.performanceClient.setPreQueueTime(PerformanceEvents.RefreshTokenClientAcquireTokenByRefreshToken, request.correlationId);\r\n                        return [2 /*return*/, refreshTokenClient.acquireTokenByRefreshToken(silentRequest)\r\n                                .then(function (result) {\r\n                                acquireTokenMeasurement.endMeasurement({\r\n                                    success: true,\r\n                                    fromCache: result.fromCache,\r\n                                    requestId: result.requestId\r\n                                });\r\n                                return result;\r\n                            })\r\n                                .catch(function (e) {\r\n                                if (e instanceof AuthError) {\r\n                                    e.setCorrelationId(_this.correlationId);\r\n                                }\r\n                                serverTelemetryManager.cacheFailedRequest(e);\r\n                                acquireTokenMeasurement.endMeasurement({\r\n                                    errorCode: e.errorCode,\r\n                                    subErrorCode: e.subError,\r\n                                    success: false\r\n                                });\r\n                                throw e;\r\n                            })];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Currently Unsupported\r\n     */\r\n    SilentRefreshClient.prototype.logout = function () {\r\n        // Synchronous so we must reject\r\n        return Promise.reject(BrowserAuthError.createSilentLogoutUnsupportedError());\r\n    };\r\n    /**\r\n     * Creates a Refresh Client with the given authority, or the default authority.\r\n     * @param serverTelemetryManager\r\n     * @param authorityUrl\r\n     */\r\n    SilentRefreshClient.prototype.createRefreshTokenClient = function (serverTelemetryManager, authorityUrl, azureCloudOptions) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var clientConfig;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        // Create auth module.\r\n                        this.performanceClient.setPreQueueTime(PerformanceEvents.StandardInteractionClientGetClientConfiguration, this.correlationId);\r\n                        return [4 /*yield*/, this.getClientConfiguration(serverTelemetryManager, authorityUrl, azureCloudOptions)];\r\n                    case 1:\r\n                        clientConfig = _a.sent();\r\n                        return [2 /*return*/, new RefreshTokenClient(clientConfig, this.performanceClient)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return SilentRefreshClient;\r\n}(StandardInteractionClient));\n\nexport { SilentRefreshClient };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}