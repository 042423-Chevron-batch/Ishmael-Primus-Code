{"ast":null,"code":"\"use strict\";\n\nvar _asyncToGenerator = require(\"C:/Users/ishma/Revature/Ishmael-Primus-Code-/ecomm-prj1/node_modules/@babel/runtime/helpers/asyncToGenerator.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _metadataParser = _interopRequireDefault(require(\"../metadata-parser\"));\nvar _token = require(\"./token\");\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\nfunction readTableName(parser, options, metadata, callback) {\n  if (metadata.type.hasTableName) {\n    if (options.tdsVersion >= '7_2') {\n      parser.readUInt8(numberOfTableNameParts => {\n        const tableName = [];\n        let i = 0;\n        function next(done) {\n          if (numberOfTableNameParts === i) {\n            return done();\n          }\n          parser.readUsVarChar(part => {\n            tableName.push(part);\n            i++;\n            next(done);\n          });\n        }\n        next(() => {\n          callback(tableName);\n        });\n      });\n    } else {\n      parser.readUsVarChar(callback);\n    }\n  } else {\n    callback(undefined);\n  }\n}\nfunction readColumnName(parser, options, index, metadata, callback) {\n  parser.readBVarChar(colName => {\n    if (options.columnNameReplacer) {\n      callback(options.columnNameReplacer(colName, index, metadata));\n    } else if (options.camelCaseColumns) {\n      callback(colName.replace(/^[A-Z]/, function (s) {\n        return s.toLowerCase();\n      }));\n    } else {\n      callback(colName);\n    }\n  });\n}\nfunction readColumn(parser, options, index, callback) {\n  (0, _metadataParser.default)(parser, options, metadata => {\n    readTableName(parser, options, metadata, tableName => {\n      readColumnName(parser, options, index, metadata, colName => {\n        callback({\n          userType: metadata.userType,\n          flags: metadata.flags,\n          type: metadata.type,\n          collation: metadata.collation,\n          precision: metadata.precision,\n          scale: metadata.scale,\n          udtInfo: metadata.udtInfo,\n          dataLength: metadata.dataLength,\n          schema: metadata.schema,\n          colName: colName,\n          tableName: tableName\n        });\n      });\n    });\n  });\n}\nfunction colMetadataParser(_x) {\n  return _colMetadataParser.apply(this, arguments);\n}\nfunction _colMetadataParser() {\n  _colMetadataParser = _asyncToGenerator(function* (parser) {\n    while (parser.buffer.length - parser.position < 2) {\n      yield parser.streamBuffer.waitForChunk();\n    }\n    const columnCount = parser.buffer.readUInt16LE(parser.position);\n    parser.position += 2;\n    const columns = [];\n    for (let i = 0; i < columnCount; i++) {\n      let column;\n      readColumn(parser, parser.options, i, c => {\n        column = c;\n      });\n      while (parser.suspended) {\n        yield parser.streamBuffer.waitForChunk();\n        parser.suspended = false;\n        const next = parser.next;\n        next();\n      }\n      columns.push(column);\n    }\n    return new _token.ColMetadataToken(columns);\n  });\n  return _colMetadataParser.apply(this, arguments);\n}\nvar _default = colMetadataParser;\nexports.default = _default;\nmodule.exports = colMetadataParser;","map":{"version":3,"names":["_asyncToGenerator","require","default","Object","defineProperty","exports","value","_metadataParser","_interopRequireDefault","_token","obj","__esModule","readTableName","parser","options","metadata","callback","type","hasTableName","tdsVersion","readUInt8","numberOfTableNameParts","tableName","i","next","done","readUsVarChar","part","push","undefined","readColumnName","index","readBVarChar","colName","columnNameReplacer","camelCaseColumns","replace","s","toLowerCase","readColumn","userType","flags","collation","precision","scale","udtInfo","dataLength","schema","colMetadataParser","_x","_colMetadataParser","apply","arguments","buffer","length","position","streamBuffer","waitForChunk","columnCount","readUInt16LE","columns","column","c","suspended","ColMetadataToken","_default","module"],"sources":["C:/Users/ishma/Revature/Ishmael-Primus-Code-/ecomm-prj1/node_modules/tedious/lib/token/colmetadata-token-parser.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _metadataParser = _interopRequireDefault(require(\"../metadata-parser\"));\n\nvar _token = require(\"./token\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction readTableName(parser, options, metadata, callback) {\n  if (metadata.type.hasTableName) {\n    if (options.tdsVersion >= '7_2') {\n      parser.readUInt8(numberOfTableNameParts => {\n        const tableName = [];\n        let i = 0;\n\n        function next(done) {\n          if (numberOfTableNameParts === i) {\n            return done();\n          }\n\n          parser.readUsVarChar(part => {\n            tableName.push(part);\n            i++;\n            next(done);\n          });\n        }\n\n        next(() => {\n          callback(tableName);\n        });\n      });\n    } else {\n      parser.readUsVarChar(callback);\n    }\n  } else {\n    callback(undefined);\n  }\n}\n\nfunction readColumnName(parser, options, index, metadata, callback) {\n  parser.readBVarChar(colName => {\n    if (options.columnNameReplacer) {\n      callback(options.columnNameReplacer(colName, index, metadata));\n    } else if (options.camelCaseColumns) {\n      callback(colName.replace(/^[A-Z]/, function (s) {\n        return s.toLowerCase();\n      }));\n    } else {\n      callback(colName);\n    }\n  });\n}\n\nfunction readColumn(parser, options, index, callback) {\n  (0, _metadataParser.default)(parser, options, metadata => {\n    readTableName(parser, options, metadata, tableName => {\n      readColumnName(parser, options, index, metadata, colName => {\n        callback({\n          userType: metadata.userType,\n          flags: metadata.flags,\n          type: metadata.type,\n          collation: metadata.collation,\n          precision: metadata.precision,\n          scale: metadata.scale,\n          udtInfo: metadata.udtInfo,\n          dataLength: metadata.dataLength,\n          schema: metadata.schema,\n          colName: colName,\n          tableName: tableName\n        });\n      });\n    });\n  });\n}\n\nasync function colMetadataParser(parser) {\n  while (parser.buffer.length - parser.position < 2) {\n    await parser.streamBuffer.waitForChunk();\n  }\n\n  const columnCount = parser.buffer.readUInt16LE(parser.position);\n  parser.position += 2;\n  const columns = [];\n\n  for (let i = 0; i < columnCount; i++) {\n    let column;\n    readColumn(parser, parser.options, i, c => {\n      column = c;\n    });\n\n    while (parser.suspended) {\n      await parser.streamBuffer.waitForChunk();\n      parser.suspended = false;\n      const next = parser.next;\n      next();\n    }\n\n    columns.push(column);\n  }\n\n  return new _token.ColMetadataToken(columns);\n}\n\nvar _default = colMetadataParser;\nexports.default = _default;\nmodule.exports = colMetadataParser;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}